#!groovy
podTemplate(
  label: "skopeo-pod",
  cloud: "openshift",
  inheritFrom: "maven",
  containers: [
    containerTemplate(
      name: "jnlp",
      image: "docker-registry.default.svc:5000/${GUID}-jenkins/jenkins-agent-appdev",
      resourceRequestMemory: "1Gi",
      resourceLimitMemory: "2Gi",
      resourceRequestCpu: "1",
      resourceLimitCpu: "2"
    )
  ]
) {
 
  //def mvnCmd      = "mvn -s ../nexus_settings.xml"
  //def version     = ""
  //def devTag      = "0.0-0"
  //def prodTag     = "0.0"
  //def destApp     = "tasks-green"
  //def activeApp   = ""
	
  node('skopeo-pod') {
    // Define Maven Command to point to the correct
    // settings for our Nexus installation

    // Checkout Source Code.
    stage('Checkout Source') {
      echo "Say some shiz"
    }
  }
}

// Convenience Functions to read version from the pom.xml
// Do not change anything below this line.
// --------------------------------------------------------
def getVersionFromPom(pom) {
  def matcher = readFile(pom) =~ '<version>(.+)</version>'
  matcher ? matcher[0][1] : null
}

  