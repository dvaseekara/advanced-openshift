pipeline {
  agent {
    kubernetes {
      label "homework"
      cloud "openshift"
      inheritFrom "maven"
      containerTemplate {
        name "jnlp"
        image "docker-registry.default.svc:5000/72a4-jenkins/jenkins-agent-appdev:latest"
        resourceRequestMemory "1Gi"
        resourceLimitMemory "2Gi"
        resourceRequestCpu "1"
        resourceLimitCpu "2"
      }
    }
  }
  stages {
    stage('Testing pod') {
      steps {
        echo "*******************************************************\n" +
             "*** Advanced OpenShift Development Homework Grading ***\n" +
             "*** GUID:         ${GUID}\n" +
             "*** USER:         ${USER}\n" +
             "*** Student Repo: *********\n" +
             "*** CLUSTER:      ${CLUSTER}\n" +
             "*** SETUP:        ${SETUP}\n" +
             "*** DELETE:       ${DELETE}\n" +
             "*******************************************************"

        echo "Cloning Student Project Repository"
        git '${REPO}'
        sh "chmod +x ./bin/*.sh"
      }
    }
  }
}
